{
  "base": "main",
  "commitMessage": "fix: keyStatus strings + reveal logic (valid JS)",
  "replacements": [
    {
      "file": "index.html",
      "mode": "regex",
      "find": "const apiKeyInput = \\$\\(\"#apiKey\", left\\);[\\s\\S]*?\\$\\(\"#revealKey\", left\\)\\.onclick = \\(\\) => \\{[\\s\\S]*?\\n\\s*\\};",
      "replace": "const apiKeyInput = $(\"#apiKey\", left);\n    const keyStatus = $(\"#keyStatus\", left);\n    const saved = getOpenAIKey();\n\n    if (apiKeyInput) {\n      apiKeyInput.type = \"password\";\n      apiKeyInput.value = \"\";\n    }\n    if (keyStatus) {\n      keyStatus.textContent = saved ? `Key saved (ends with …${saved.slice(-4)}).` : \"No key saved.\";\n    }\n\n    $(\"#saveKey\", left).onclick = () => {\n      setOpenAIKey(apiKeyInput.value);\n      const saved2 = getOpenAIKey();\n      if (keyStatus) keyStatus.textContent = saved2 ? `Key saved (ends with …${saved2.slice(-4)}).` : \"No key saved.\";\n      if (apiKeyInput) {\n        apiKeyInput.type = \"password\";\n        apiKeyInput.value = \"\";\n      }\n      const r = $(\"#revealKey\", left);\n      if (r) r.textContent = \"Reveal\";\n      toast(saved2 ? \"Saved key.\" : \"Key cleared.\");\n    };\n\n    $(\"#clearKey\", left).onclick = () => {\n      setOpenAIKey(\"\");\n      if (keyStatus) keyStatus.textContent = \"No key saved.\";\n      if (apiKeyInput) {\n        apiKeyInput.type = \"password\";\n        apiKeyInput.value = \"\";\n      }\n      const r = $(\"#revealKey\", left);\n      if (r) r.textContent = \"Reveal\";\n      toast(\"Cleared.\");\n    };\n\n    let revealed = false;\n    $(\"#revealKey\", left).onclick = () => {\n      const k = getOpenAIKey();\n      if (!k) return toast(\"No key saved.\");\n      revealed = !revealed;\n      apiKeyInput.type = revealed ? \"text\" : \"password\";\n      apiKeyInput.value = revealed ? k : \"\";\n      $(\"#revealKey\", left).textContent = revealed ? \"Hide\" : \"Reveal\";\n    };"
    }
  ]
}
